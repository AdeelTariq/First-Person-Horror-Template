[gd_scene load_steps=32 format=3 uid="uid://djkpcj848dq8r"]

[ext_resource type="Script" uid="uid://djbep3fx80av6" path="res://scenes/playground.gd" id="1_q8s1k"]
[ext_resource type="Resource" uid="uid://xl87lpokidjq" path="res://resources/input/first_person.tres" id="2_emj6c"]
[ext_resource type="PackedScene" uid="uid://cvm1x6igaprq3" path="res://addons/player/player.tscn" id="2_qchbg"]
[ext_resource type="Script" uid="uid://dbeox2vva4qi5" path="res://addons/game_controls/guide_game_control.gd" id="3_kddj0"]
[ext_resource type="Resource" uid="uid://c7k5lpg5de8o" path="res://resources/input/look.tres" id="5_o6wi6"]
[ext_resource type="Resource" uid="uid://dimhlehdifyjq" path="res://resources/input/move.tres" id="6_emj6c"]
[ext_resource type="AudioStream" uid="uid://b5w7kope1qekn" path="res://assets/sounds/step2.ogg" id="6_k63md"]
[ext_resource type="AudioStream" uid="uid://1y2wgje8ommq" path="res://assets/sounds/step3.ogg" id="6_q6c7b"]
[ext_resource type="Resource" uid="uid://brnqqmuh1dx5c" path="res://resources/input/jump.tres" id="8_2bfhc"]
[ext_resource type="Script" uid="uid://bxe74cq2uqemi" path="res://addons/game_controls/input_map_game_control.gd" id="8_mrac1"]
[ext_resource type="Script" uid="uid://byf0ij6s7416m" path="res://addons/game_controls/mouse_game_control.gd" id="9_2q4k0"]
[ext_resource type="AudioStream" uid="uid://cohl5wjeir637" path="res://assets/sounds/step6.ogg" id="9_ocmmj"]
[ext_resource type="Resource" uid="uid://bb78ofk7i5gqf" path="res://resources/input/sprint.tres" id="9_osidk"]
[ext_resource type="Resource" uid="uid://bncmn5k1te4ge" path="res://resources/input/crouch.tres" id="11_k63md"]
[ext_resource type="Resource" uid="uid://b3kwcgwj0j3fh" path="res://resources/input/lean.tres" id="13_fn4oh"]
[ext_resource type="Resource" uid="uid://hs30p6qmf2n5" path="res://resources/input/zoom.tres" id="14_j30dx"]
[ext_resource type="Script" uid="uid://ck3cei0hvspym" path="res://addons/interaction_system/interaction_container.gd" id="17_d3jfy"]
[ext_resource type="Script" uid="uid://5tinbhq6p45k" path="res://addons/interaction_system/interaction.gd" id="18_q6c7b"]
[ext_resource type="PackedScene" uid="uid://bimo0ijo3l1di" path="res://scenes/door/door.tscn" id="18_wm6m6"]
[ext_resource type="Resource" uid="uid://ddiuhvmirmfvc" path="res://resources/input/interact.tres" id="19_q6c7b"]
[ext_resource type="Script" uid="uid://doc0okecalxnp" path="res://addons/interaction_system/interaction_context.gd" id="21_ocmmj"]
[ext_resource type="Script" uid="uid://dbv6ey8p6fq33" path="res://scenes/hud.gd" id="21_wm6m6"]
[ext_resource type="Resource" uid="uid://b1b0x2qegnn8b" path="res://resources/input/use.tres" id="22_vwj6b"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_o6wi6"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_emj6c"]
sky_material = SubResource("ProceduralSkyMaterial_o6wi6")

[sub_resource type="Environment" id="Environment_mrac1"]
background_mode = 2
sky = SubResource("Sky_emj6c")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_2bfhc"]
streams_count = 3
stream_0/stream = ExtResource("6_k63md")
stream_1/stream = ExtResource("6_q6c7b")
stream_2/stream = ExtResource("9_ocmmj")

[sub_resource type="PrismMesh" id="PrismMesh_k63md"]
left_to_right = 0.4
size = Vector3(10, 5, 10)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_x2tju"]
albedo_color = Color(0.27755955, 0.4254524, 0.08938744, 1)

[sub_resource type="Gradient" id="Gradient_x2tju"]
interpolation_mode = 1
offsets = PackedFloat32Array(0, 0.13125)
colors = PackedColorArray(1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_wm6m6"]
gradient = SubResource("Gradient_x2tju")
fill = 1
fill_from = Vector2(0.5, 0.5)

[node name="Playground" type="Node3D"]
script = ExtResource("1_q8s1k")
mapping_context = ExtResource("2_emj6c")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.8660254, -0.43301278, 0.25, 0, 0.49999997, 0.86602545, -0.50000006, 0.75, -0.43301266, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_mrac1")

[node name="Player" parent="." instance=ExtResource("2_qchbg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 20, 0)
velocity = Vector3(0, -733.02686, 0)
footsteps_sound = SubResource("AudioStreamRandomizer_2bfhc")

[node name="Controls" type="Node" parent="Player"]

[node name="look" type="Node" parent="Player/Controls"]
unique_name_in_owner = true
script = ExtResource("3_kddj0")
action = ExtResource("5_o6wi6")
metadata/_custom_type_script = "uid://dbeox2vva4qi5"

[node name="move" type="Node" parent="Player/Controls"]
unique_name_in_owner = true
script = ExtResource("3_kddj0")
action = ExtResource("6_emj6c")
metadata/_custom_type_script = "uid://dbeox2vva4qi5"

[node name="jump" type="Node" parent="Player/Controls"]
unique_name_in_owner = true
script = ExtResource("3_kddj0")
action = ExtResource("8_2bfhc")
metadata/_custom_type_script = "uid://dbeox2vva4qi5"

[node name="crouch" type="Node" parent="Player/Controls"]
unique_name_in_owner = true
script = ExtResource("3_kddj0")
action = ExtResource("11_k63md")
metadata/_custom_type_script = "uid://dbeox2vva4qi5"

[node name="sprint" type="Node" parent="Player/Controls"]
unique_name_in_owner = true
script = ExtResource("3_kddj0")
action = ExtResource("9_osidk")
metadata/_custom_type_script = "uid://dbeox2vva4qi5"

[node name="lean" type="Node" parent="Player/Controls"]
unique_name_in_owner = true
script = ExtResource("3_kddj0")
action = ExtResource("13_fn4oh")
metadata/_custom_type_script = "uid://dbeox2vva4qi5"

[node name="zoom" type="Node" parent="Player/Controls"]
unique_name_in_owner = true
script = ExtResource("3_kddj0")
action = ExtResource("14_j30dx")
metadata/_custom_type_script = "uid://dbeox2vva4qi5"

[node name="keyboard_look_example" type="Node" parent="Player/Controls"]
unique_name_in_owner = true
script = ExtResource("8_mrac1")
type = 1
negative_x = &"ui_right"
positive_x = &"ui_left"
negative_y = &"ui_down"
positive_y = &"ui_up"
metadata/_custom_type_script = "uid://bxe74cq2uqemi"

[node name="keyboard_move_example" type="Node" parent="Player/Controls"]
unique_name_in_owner = true
script = ExtResource("8_mrac1")
type = 1
negative_x = &"ui_left"
positive_x = &"ui_right"
negative_y = &"ui_up"
positive_y = &"ui_down"
metadata/_custom_type_script = "uid://bxe74cq2uqemi"

[node name="keyboard_lean_example" type="Node" parent="Player/Controls"]
unique_name_in_owner = true
script = ExtResource("8_mrac1")
type = 1
negative_x = &"lean_left"
positive_x = &"lean_right"
metadata/_custom_type_script = "uid://bxe74cq2uqemi"

[node name="keyboard_jump_example" type="Node" parent="Player/Controls"]
unique_name_in_owner = true
script = ExtResource("8_mrac1")
action = &"ui_accept"
negative_x = &"ui_left"
positive_x = &"ui_right"
negative_y = &"ui_up"
positive_y = &"ui_down"
metadata/_custom_type_script = "uid://bxe74cq2uqemi"

[node name="mouse_look_example" type="Node" parent="Player/Controls"]
unique_name_in_owner = true
script = ExtResource("9_2q4k0")
metadata/_custom_type_script = "uid://byf0ij6s7416m"

[node name="Slide" type="CSGMesh3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 2.507557, 0)
calculate_tangents = false
use_collision = true
mesh = SubResource("PrismMesh_k63md")

[node name="Tunnel" type="CSGCylinder3D" parent="Slide"]
transform = Transform3D(1, 0, 0, 0, -4.371139e-08, -1, 0, 1, -4.371139e-08, 0, -1.8048909, 0)
operation = 2
calculate_tangents = false
radius = 1.0
height = 11.0

[node name="Ground" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -50, 0)
calculate_tangents = false
use_collision = true
size = Vector3(100, 100, 100)
material = SubResource("StandardMaterial3D_x2tju")

[node name="Door" parent="." instance=ExtResource("18_wm6m6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -8)

[node name="StaticBody3D" parent="Door/wall_doorway/wall_doorway_door" index="0"]
metadata/interaction_container = Object(Node,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","script":ExtResource("17_d3jfy"),"default_context_id":0,"display_name":"Door","override_disabled_display_name":true,"disabled_display_name":"Locked Door","_enabled_context_id":0,"_interactions":Array[ExtResource("18_q6c7b")]([Object(Node,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","script":ExtResource("18_q6c7b"),"is_hold":false,"override_display_name":false,"display_name":"","control":Object(Node,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","script":ExtResource("3_kddj0"),"action":ExtResource("19_q6c7b"),"metadata/_custom_type_script":"uid://dbeox2vva4qi5")
,"_triggered_last_frame":false,"metadata/_custom_type_script":"uid://5tinbhq6p45k")
]),"disabled_display_name":"Locked Door","metadata/_custom_type_script":"uid://ck3cei0hvspym")


[node name="InteractionContainer" type="Node" parent="Door/wall_doorway/wall_doorway_door/StaticBody3D" index="1"]
script = ExtResource("17_d3jfy")
display_name = "Door"
override_disabled_display_name = true
disabled_display_name = "Locked Door"
metadata/_custom_type_script = "uid://ck3cei0hvspym"

[node name="Interact" type="Node" parent="Door/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer"]
script = ExtResource("18_q6c7b")
metadata/_custom_type_script = "uid://5tinbhq6p45k"

[node name="Control" type="Node" parent="Door/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Interact"]
script = ExtResource("3_kddj0")
action = ExtResource("19_q6c7b")
metadata/_custom_type_script = "uid://dbeox2vva4qi5"

[node name="SimpleLockedDoor" parent="." instance=ExtResource("18_wm6m6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 0, -8)

[node name="StaticBody3D" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door" index="0"]
metadata/interaction_container = Object(Node,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","script":ExtResource("17_d3jfy"),"default_context_id":0,"display_name":"Door","override_disabled_display_name":false,"disabled_display_name":"","_enabled_context_id":0,"_interactions":Array[ExtResource("18_q6c7b")]([Object(Node,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","script":ExtResource("18_q6c7b"),"is_hold":false,"override_display_name":false,"display_name":"","control":Object(Node,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","script":ExtResource("3_kddj0"),"action":ExtResource("19_q6c7b"),"metadata/_custom_type_script":"uid://dbeox2vva4qi5")
,"_triggered_last_frame":false,"metadata/_custom_type_script":"uid://5tinbhq6p45k")
, Object(Node,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","script":ExtResource("18_q6c7b"),"is_hold":false,"override_display_name":false,"display_name":"","control":Object(Node,"_import_path":NodePath(""),"unique_name_in_owner":false,"process_mode":0,"process_priority":0,"process_physics_priority":0,"process_thread_group":0,"physics_interpolation_mode":0,"auto_translate_mode":0,"editor_description":"","script":ExtResource("3_kddj0"),"action":ExtResource("22_vwj6b"),"metadata/_custom_type_script":"uid://dbeox2vva4qi5")
,"_triggered_last_frame":false,"metadata/_custom_type_script":"uid://5tinbhq6p45k")
]),"metadata/_custom_type_script":"uid://ck3cei0hvspym")


[node name="InteractionContainer" type="Node" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D" index="1"]
script = ExtResource("17_d3jfy")
display_name = "Door"
metadata/_custom_type_script = "uid://ck3cei0hvspym"

[node name="Closed" type="Node" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer"]
script = ExtResource("21_ocmmj")
override_display_name = true
display_name = "Closed Door"
metadata/_custom_type_script = "uid://doc0okecalxnp"

[node name="Open" type="Node" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Closed"]
script = ExtResource("18_q6c7b")
metadata/_custom_type_script = "uid://5tinbhq6p45k"

[node name="Control" type="Node" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Closed/Open"]
script = ExtResource("3_kddj0")
action = ExtResource("19_q6c7b")
metadata/_custom_type_script = "uid://dbeox2vva4qi5"

[node name="Lock" type="Node" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Closed"]
script = ExtResource("18_q6c7b")
metadata/_custom_type_script = "uid://5tinbhq6p45k"

[node name="Control" type="Node" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Closed/Lock"]
script = ExtResource("3_kddj0")
action = ExtResource("22_vwj6b")
metadata/_custom_type_script = "uid://dbeox2vva4qi5"

[node name="Open" type="Node" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer"]
script = ExtResource("21_ocmmj")
context_id = 1
override_display_name = true
display_name = "Open Door"
metadata/_custom_type_script = "uid://doc0okecalxnp"

[node name="Close" type="Node" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Open"]
script = ExtResource("18_q6c7b")
metadata/_custom_type_script = "uid://5tinbhq6p45k"

[node name="Control" type="Node" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Open/Close"]
script = ExtResource("3_kddj0")
action = ExtResource("19_q6c7b")
metadata/_custom_type_script = "uid://dbeox2vva4qi5"

[node name="Locked" type="Node" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer"]
script = ExtResource("21_ocmmj")
context_id = 2
override_display_name = true
display_name = "Locked Door"
metadata/_custom_type_script = "uid://doc0okecalxnp"

[node name="Unlock" type="Node" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Locked"]
script = ExtResource("18_q6c7b")
metadata/_custom_type_script = "uid://5tinbhq6p45k"

[node name="Control" type="Node" parent="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Locked/Unlock"]
script = ExtResource("3_kddj0")
action = ExtResource("19_q6c7b")
metadata/_custom_type_script = "uid://dbeox2vva4qi5"

[node name="HUD" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("21_wm6m6")

[node name="CrossHair" type="TextureRect" parent="HUD"]
unique_name_in_owner = true
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
texture = SubResource("GradientTexture2D_wm6m6")

[node name="InteractPrompt" type="RichTextLabel" parent="HUD"]
unique_name_in_owner = true
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -79.0
offset_bottom = -56.0
grow_horizontal = 2
grow_vertical = 0
bbcode_enabled = true
fit_content = true
autowrap_mode = 2
horizontal_alignment = 1

[connection signal="on_complete" from="Door/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Interact" to="Door" method="interact"]
[connection signal="on_complete" from="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Closed/Open" to="SimpleLockedDoor" method="interact"]
[connection signal="on_complete" from="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Closed/Lock" to="SimpleLockedDoor" method="interact"]
[connection signal="on_complete" from="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Open/Close" to="SimpleLockedDoor" method="interact"]
[connection signal="on_complete" from="SimpleLockedDoor/wall_doorway/wall_doorway_door/StaticBody3D/InteractionContainer/Locked/Unlock" to="SimpleLockedDoor" method="interact"]

[editable path="Door"]
[editable path="SimpleLockedDoor"]
